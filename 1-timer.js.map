{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst timeInput = document.querySelector(\"#datetime-picker\");\nconst startButton = document.querySelector(\".timer-button\");\n\nconst daysElem = document.querySelector(\"[data-days]\")\nconst hoursElem = document.querySelector(\"[data-hours]\")\nconst minutesElem = document.querySelector(\"[data-minutes]\")\nconst secondsElem = document.querySelector(\"[data-seconds]\")\n\nlet userDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose(selectedDates) {\n        userDate = selectedDates[0];\n\n        if (userDate < new Date()) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Illegal operation',\n            });\n\n            startButton.classList.remove(\"active-btn\");\n            return;\n        } else { \n            startButton.classList.add(\"active-btn\");\n        }\n        \n        return userDate;\n  },\n};\n\nflatpickr(timeInput, options); \n\nlet isActive = false;\n\nstartButton.addEventListener(\"click\", (e) => { \n    if (!e.target.classList.contains(\"active-btn\") || isActive) return;\n\n    isActive = true;\n\n    startButton.classList.remove(\"active-btn\");\n\n    timeInput.setAttribute(\"disabled\", true);\n\n    const timer = setInterval(() => {\n\n        const timeDifference = userDate.getTime() - Date.now();\n        \n        if (timeDifference <= 1000) {\n            clearInterval(timer)\n            isActive = true;\n            timeInput.removeAttribute(\"disabled\");\n            startButton.classList.add(\"active-btn\");\n        }\n        \n        const { days, hours, minutes, seconds } = convertMs(timeDifference);\n        \n        timerRendering(days, hours, minutes, seconds)\n\n     }, 1000);\n    \n});\n\nfunction timerRendering(days, hours, minutes, seconds) {\n    \n    daysElem.textContent = days.toString().padStart(2,\"0\");\n    hoursElem.textContent = hours.toString().padStart(2,\"0\");\n    minutesElem.textContent = minutes.toString().padStart(2,\"0\");\n    secondsElem.textContent = seconds.toString().padStart(2,\"0\");\n\n\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}"],"names":["timeInput","startButton","daysElem","hoursElem","minutesElem","secondsElem","userDate","options","selectedDates","iziToast","flatpickr","isActive","e","timer","timeDifference","days","hours","minutes","seconds","convertMs","timerRendering","ms"],"mappings":"0IAOA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,eAAe,EAEpDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQC,EAAe,CAGnB,GAFAF,EAAWE,EAAc,CAAC,EAEtBF,EAAW,IAAI,KAAQ,CACvBG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mBACzB,CAAa,EAEDR,EAAY,UAAU,OAAO,YAAY,EACzC,MACZ,MACYA,EAAY,UAAU,IAAI,YAAY,EAG1C,OAAOK,CACZ,CACH,EAEAI,EAAUV,EAAWO,CAAO,EAE5B,IAAII,EAAW,GAEfV,EAAY,iBAAiB,QAAUW,GAAM,CACzC,GAAI,CAACA,EAAE,OAAO,UAAU,SAAS,YAAY,GAAKD,EAAU,OAE5DA,EAAW,GAEXV,EAAY,UAAU,OAAO,YAAY,EAEzCD,EAAU,aAAa,WAAY,EAAI,EAEvC,MAAMa,EAAQ,YAAY,IAAM,CAE5B,MAAMC,EAAiBR,EAAS,QAAS,EAAG,KAAK,IAAG,EAEhDQ,GAAkB,MAClB,cAAcD,CAAK,EACnBF,EAAW,GACXX,EAAU,gBAAgB,UAAU,EACpCC,EAAY,UAAU,IAAI,YAAY,GAG1C,KAAM,CAAE,KAAAc,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAc,EAElEM,EAAeL,EAAMC,EAAOC,EAASC,CAAO,CAE9C,EAAE,GAAI,CAEZ,CAAC,EAED,SAASE,EAAeL,EAAMC,EAAOC,EAASC,EAAS,CAEnDhB,EAAS,YAAca,EAAK,SAAU,EAAC,SAAS,EAAE,GAAG,EACrDZ,EAAU,YAAca,EAAM,SAAU,EAAC,SAAS,EAAE,GAAG,EACvDZ,EAAY,YAAca,EAAQ,SAAU,EAAC,SAAS,EAAE,GAAG,EAC3DZ,EAAY,YAAca,EAAQ,SAAU,EAAC,SAAS,EAAE,GAAG,CAG/D,CAEA,SAASC,EAAUE,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}